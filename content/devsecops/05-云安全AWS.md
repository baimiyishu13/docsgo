+++
title = '05 云安全AWS'
date = 2024-05-03T10:56:31+08:00
draft = true
+++

云安全 (AWS)

- AWS 访问管理（用户、组、角色、策略）
- AWS安全 IaC
- AWS日志记录和监控

##  AWS 访问管理

安全最佳实践：最低访问权限



云平台也需要确保网络安全：AWS 账户安全

+ 谁可以获得什么服务 或者用户和权限

如果有人错误的访问 AWS 资源，那就存在安全风险，管理不到位。

可能会导致 窃取凭据和对账户的访问，以至于可以再环境中为所欲为。



​		也许你的VPC网络超级安全，而且没人能从网上进入你的网络，但是如果允许对于许多员工有高权限，忘记撤销，比如前员工，或者只是管理管道中的代码凭证，然后有人窃取这些凭证直接访问资源。

​		更本不需要费力去入侵网络，只需要登陆你的账户访问

配置管理用户权限

每个项目，每个存储库，都可以是一个单独的角色

+ 网络配置
+ 权限管理
+ 部署到AWS
+ AWS ECR服



AWS 访问管理本身非常重要！！【最低访问权限】

+ 用户、权限、策略、的创建和管理

一旦不需要访问某个资源，或者项目结束，或者是换了团队。

监视用户操作：

+ 也许是因为没有足够的知识
+ 也许是故意的



用户、组、角色

保护AWS账户：

###  IAM 服务

对AWS的所有访问都收到管理：  IAM 服务

root 用户，管理aws 所有，可以做任何事情

1. MFA 多因子认证
2. 不要轻易使用 生成root 的认证凭证



如果我们需要为cicd 管道创建一个连接的凭证：

我们不能给所有人 root 权限，尤其是管道和各种工具，事实上没人应该使用它。

有些事情只能 root 去做：访问账单、支付信息、更新账户等等



创建一个 admin user

再通过 admin 创建其他用户，包括管道用户。

假设团队中：开发、测试、运维、网络管理员

+ 访问方式：UI、凭证

gitlab 不需要 Ui登陆AWS，所以只需要创建一个 专有凭证的用户



授予：用户权限策略



IAM Group

不同的组、团队、有不同的访问权限，因为他们有不同的资源



使用 cicd 时，例如可以创建 gitlab 用户，授权对 EC2服务器内的访问即可，而非是对EC2的访问

