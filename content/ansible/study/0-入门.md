+++
title = '0 入门'
date = 2024-04-07T21:14:26+08:00
draft = true
+++

ansible 和 Terraform 是最受欢迎的基础设施代码之一

社区：

terraform 是声明性的，而 Ansible 是命令性的

Terraform 的一般用例是通过在 TF 代码中编写资源并运行 TF 来创建云基础设施，这会尝试使云状态与代码状态相同。因此，如果您为资源编写了代码，但该资源尚不存在，则运行 TF 将创建该资源，如果该资源已存在但您更改了代码中的属性，它将修改资源以匹配代码。

Ansible 的一般用例是配置服务器内部。它允许您管理服务器清单和一堆脚本，这些脚本在称为剧本的集合中安装内容并编辑配置文件。然后，您可以选择在哪些服务器上运行哪些剧本。它通过 SSH 完成所有这些工作，因此非常灵活。



我想说最重要的是 Ansible 势在必行，正如[r/Unro](https://www.reddit.com/r/Unro/)提到的那样。当然，您可以仅使用 Ansible 完成 Terraform 能做的所有事情，但当今的常见做法是使用 Terraform 调用 Ansible。想象一下 Ansible 在虚拟机启动后用于设置它。 Terraform 将用于管理虚拟机的初始创建，而 Ansible 将用于执行任何其他下游依赖项设置。





> 有人说服我 Ansible 缺少什么，需要我使用 Terraform。

从表面上看，Ansible 可以完成与 Terraform 相同类型的基础设施配置。然而，它们在架构上有根本的不同——Ansible 是一个命令式脚本执行引擎，它将按照代码中列出的顺序运行任务，而 Terraform 是一个声明式执行引擎，它将并行化彼此不直接依赖的任务。因此，除了非常小的代码库之外，Terraform 的执行速度比 Ansible 快得多。

（顺便说一句，大规模执行速度慢是 Ansible 的主要弱点。）

Terraform 基于图形的性质还使得可以使用与创建基础设施完全相同的代码来销毁基础设施，而 Ansible 需要单独的剧本来创建和销毁。对于定期创建和销毁的环境（例如，开发/测试/登台），Terraform 的方法既可以大幅提高生产力，又可以减少人为错误的机会。

最后，虽然这不一定是 Ansible 的技术缺陷，但在基础设施配置方面，Terraform 迄今为止拥有最多的社区和开发理念。与任何其他基础设施配置工具相比，您更有可能找到 Terraform 的支持资源，并且您希望以编程方式配置的新产品可能会首先在 Terraform 中获得支持。



```sh
  - host: portal.gdenergypulse.com
    http:
      paths:
      - backend:
          serviceName: web-proxy-yoi
          servicePort: 8000
        path: /
   
  - hosts:
    - portal.gdenergypulse.com
    secretName: tls-certificate-portal.gdenergypulse.com
```



